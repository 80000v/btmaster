var waitTime=1;var delayTime=0.8;var hideTimer=null;var showTimer=null;var _tmpArray=new Array();var _currentContent=null;$("float_div_content").setStyles({width:Config.floatWindowWidth+"px",height:Config.float_window_height+"px"});waitTime=0>=waitTime?1:waitTime;showTimer=0>=showTimer?1:showTimer;function showContent(b,a,c){$("float_div").setStyle("display","none");showPosition(b);$("h_"+a).addEvent("mouseout",function(){hide();});showTimer=Tooltip.delay(1000*waitTime,this,[a,c]);}function Tooltip(a,b){stop();clearTimeout(showTimer);$("float_div_content").set("text","");showDiv(a,b);if(_tmpArray[a]){_currentContent=_tmpArray[a];insertContent(a);return true;}else{getContent(a);}}function showDiv(b,c){var a="show.php?hash="+c;if(Config.url_rewrite){a="show-"+c+".html";}$("f_info").set("html",'[<a href="'+a+'" title="查看详细信息">详细</a>]&nbsp;[<a href="'+$("h_"+b).href+'" title="点击下载">下载</a>]');$("float_div_title").set("html",$("h_"+b).get("html")+"<hr />");$("float_div").setStyles({display:"block",width:Config.floatWindowWidth+8+"px"});$("float_div").addEvents({mouseover:function(){stop();},mouseout:function(){hide();}});}function insertContent(a){$("float_div_content").set("html",_currentContent);_tmpArray[a]=_currentContent;}function stop(){if(hideTimer!=null){clearTimeout(hideTimer);hideTimer=null;}}function hide(){if(hideTimer==null){hideTimer=setTimeout(hideTooltip,1000*delayTime);}if(showTimer!=null){clearTimeout(showTimer);}}function hideTooltip(){$("float_div").setStyle("display","none");stop();}function showPosition(c){var b=pointerX(c);var a=pointerY(c);if(Config.float_window_height+b>=window.getSize().x){b=b-Config.floatWindowWidth;}if(Config.float_window_height+a>=window.getSize().y){a=a-Config.float_window_height;}b=0>b?5:b;a=0>a?5:a;$("float_div").setStyles({left:b+"px",top:a+"px"});}function getContent(a,b){_currentContent='<img src="images/loading.gif" />正在加载数据...';insertContent(a);new Request({url:"ajax.php",data:{op:"content",id:a},onFailure:function(){_currentContent="数据获取失败，请稍后再试";insertContent(a);},onComplete:function(){_currentContent=this.response.text;if("NOT_EXIST"==_currentContent){_currentContent="数据不存在";}insertContent(a);}}).send();}function pointerX(a){return a.pageX||(a.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft));}function pointerY(a){return a.pageY||(a.clientY+(document.documentElement.scrollTop||document.body.scrollTop));}