var Config=new Array();function $F(a){return $(a).value;}function checkFormData(){$("submit").value="数据正在提交";$("submit").disabled=true;return true;}function imgRefresh(a){$("vimg").src="vimg.php?n="+a+"&"+Math.random();}function displayVimg(a){if(1!=Config["verify_code_"+a]){return;}if("none"==$("imgarea").getStyle("display")){$("imgarea").setStyle("display","");imgRefresh(a);}}function cnLength(b){if(""==b){return 0;}var a=b.match(/[^\x00-\xff]/ig);return b.length+(a==null?0:a.length);}function panelDeploy(d,b){var a="panel_"+d;if(!$(a)){return false;}var c=a+"_button";if(1!=Cookie.read(a)){if(true==b){Cookie.write(a,1,{duration:365});$(a).setStyle("display","none");$(c).src="images/expand.gif";$(c).title="展开";}else{$(a).setStyle("display","");$(c).src="images/collapse.gif";$(c).title="关闭";}}else{if(true==b){Cookie.write(a,0,{duration:365});$(a).setStyle("display","");$(c).src="images/collapse.gif";$(c).title="关闭";}else{$(a).setStyle("display","none");$(c).src="images/expand.gif";$(c).title="展开";}}}function displaySortMenu(a,b){a.onmouseout=function(){$("sub_sort_"+b).setStyle("display","none");};$("sub_sort_"+b).setStyle("display","block");}function imgResize(b,a){if(b.width>a||b.height>a){if(b.width>b.height){b.width=a;}else{b.height=a;}b.title="点击在新窗口查看完整图片";b.setStyle("cursor","pointer");b.addEvent("click",function(){window.open(b.src);});}}function addFavorite(b,a){if("undefined"==typeof(b)){b=Document.location.href;}if("undefined"==typeof(a)){a=Document.location.href;}if("trident"==Browser.Engine.name){window.external.addFavorite(a,b);}else{if("gecko"==Browser.Engine.name){window.sidebar.addPanel(b,a,"");}else{Window.alert("您当前使用的浏览器不支持此操作！\n请使用 CTRL + D 键手动添加！");return;}}}function doSearchEvent(a){if(13==a.keyCode){doSearch();}}function doSearch(){var a=$F("topsearch");if(!a||"请输入您要搜索的资源名称"==a){Window.alert("请输入您要搜索的资源名称");return false;}window.location.href="search.php?keyword="+encodeURI(a);}function searchTip(a){if(a==1){if(!$F("topsearch")){$("topsearch").value="请输入您要搜索的资源名称";}}else{if($F("topsearch")=="请输入您要搜索的资源名称"){$("topsearch").value="";}$("topsearch").onblur=function(){searchTip(1);};}}function highlight(){if(!$("data_list")){return;}var a="heightlight";var b=$("data_list").childNodes.length;if(0<b){for(var c=0;c<b;c++){var d=$("data_list").childNodes[c];d.onmouseover=function(){if(!this.className.contains(a," ")){this.className=(this.className+" "+a).clean();}};d.onmouseout=function(){this.className=this.className.replace(new RegExp("(^|\\s)"+a+"(?:\\s|$)"),"$1");};}}}function rollAnnouncement(b){$clear(annst);annst=rollAnnouncement.delay(anndelay,this,1);anndefault+=b;if(anndefault>anntotal){anndefault=1;}if(anndefault==0){anndefault=anntotal;}for(var c=1;c<=anntotal;c++){$("announcement"+c).setStyle("display","none");}$("announcement"+anndefault).setStyle("display","block");$("annpageshow").set("text",anndefault+"/"+anntotal);}function searchHotScroll(){if(!kst){$("searchkeybody").innerHTML+='<br style="clear:both;" />'+$("searchkeybody").innerHTML;$("searchkeybody").scrollTop=0;if($("searchkeybody").scrollHeight>kheight*3){kst=searchHotScroll.delay(5000);}else{$("searchkey").removeEvents("mouseover");$("searchkey").removeEvents("mouseout");}return;}if(kcount==kheight){if($("searchkeybody").scrollHeight-kheight<=$("searchkeybody").scrollTop){$("searchkeybody").scrollTop=$("searchkeybody").scrollHeight/2-kheight;}kcount=0;kst=searchHotScroll.delay(5000);}else{$("searchkeybody").scrollTop++;kcount++;kst=searchHotScroll.delay(10);}}window.addEvent("domready",function(){highlight();if($("searchkey")){$("searchkey").addEvents({mouseover:function(){kcount||(kst=$clear(kst));},mouseout:function(){kst||(kst=searchHotScroll.delay(5000));}});searchHotScroll();}});
var Drag=new Class({Implements:[Events,Options],options:{snap:6,unit:"px",grid:false,style:true,limit:false,handle:false,invert:false,preventDefault:false,modifiers:{x:"left",y:"top"}},initialize:function(){var b=Array.link(arguments,{options:Object.type,element:$defined});this.element=$(b.element);this.document=this.element.getDocument();this.setOptions(b.options||{});var a=$type(this.options.handle);this.handles=(a=="array"||a=="collection")?$$(this.options.handle):$(this.options.handle)||this.element;this.mouse={now:{},pos:{}};this.value={start:{},now:{}};this.selection=(Browser.Engine.trident)?"selectstart":"mousedown";this.bound={start:this.start.bind(this),check:this.check.bind(this),drag:this.drag.bind(this),stop:this.stop.bind(this),cancel:this.cancel.bind(this),eventStop:$lambda(false)};this.attach();},attach:function(){this.handles.addEvent("mousedown",this.bound.start);return this;},detach:function(){this.handles.removeEvent("mousedown",this.bound.start);return this;},start:function(c){if(this.options.preventDefault){c.preventDefault();}this.fireEvent("beforeStart",this.element);this.mouse.start=c.page;var a=this.options.limit;this.limit={x:[],y:[]};for(var d in this.options.modifiers){if(!this.options.modifiers[d]){continue;}if(this.options.style){this.value.now[d]=this.element.getStyle(this.options.modifiers[d]).toInt();}else{this.value.now[d]=this.element[this.options.modifiers[d]];}if(this.options.invert){this.value.now[d]*=-1;}this.mouse.pos[d]=c.page[d]-this.value.now[d];if(a&&a[d]){for(var b=2;b--;b){if($chk(a[d][b])){this.limit[d][b]=$lambda(a[d][b])();}}}}if($type(this.options.grid)=="number"){this.options.grid={x:this.options.grid,y:this.options.grid};}this.document.addEvents({mousemove:this.bound.check,mouseup:this.bound.cancel});this.document.addEvent(this.selection,this.bound.eventStop);},check:function(a){if(this.options.preventDefault){a.preventDefault();}var b=Math.round(Math.sqrt(Math.pow(a.page.x-this.mouse.start.x,2)+Math.pow(a.page.y-this.mouse.start.y,2)));if(b>this.options.snap){this.cancel();this.document.addEvents({mousemove:this.bound.drag,mouseup:this.bound.stop});this.fireEvent("start",this.element).fireEvent("snap",this.element);}},drag:function(a){if(this.options.preventDefault){a.preventDefault();}this.mouse.now=a.page;for(var b in this.options.modifiers){if(!this.options.modifiers[b]){continue;}this.value.now[b]=this.mouse.now[b]-this.mouse.pos[b];if(this.options.invert){this.value.now[b]*=-1;}if(this.options.limit&&this.limit[b]){if($chk(this.limit[b][1])&&(this.value.now[b]>this.limit[b][1])){this.value.now[b]=this.limit[b][1];}else{if($chk(this.limit[b][0])&&(this.value.now[b]<this.limit[b][0])){this.value.now[b]=this.limit[b][0];}}}if(this.options.grid[b]){this.value.now[b]-=(this.value.now[b]%this.options.grid[b]);}if(this.options.style){this.element.setStyle(this.options.modifiers[b],this.value.now[b]+this.options.unit);}else{this.element[this.options.modifiers[b]]=this.value.now[b];}}this.fireEvent("drag",this.element);},cancel:function(a){this.document.removeEvent("mousemove",this.bound.check);this.document.removeEvent("mouseup",this.bound.cancel);if(a){this.document.removeEvent(this.selection,this.bound.eventStop);this.fireEvent("cancel",this.element);}},stop:function(a){this.document.removeEvent(this.selection,this.bound.eventStop);this.document.removeEvent("mousemove",this.bound.drag);this.document.removeEvent("mouseup",this.bound.stop);if(a){this.fireEvent("complete",this.element);}}});Element.implement({makeResizable:function(a){return new Drag(this,$merge({modifiers:{x:"width",y:"height"}},a));}});Drag.Move=new Class({Extends:Drag,options:{droppables:[],container:false},initialize:function(c,b){this.parent(c,b);this.droppables=$$(this.options.droppables);this.container=$(this.options.container);if(this.container&&$type(this.container)!="element"){this.container=$(this.container.getDocument().body);}c=this.element;var d=c.getStyle("position");var a=(d!="static")?d:"absolute";if(c.getStyle("left")=="auto"||c.getStyle("top")=="auto"){c.position(c.getPosition(c.offsetParent));}c.setStyle("position",a);this.addEvent("start",function(){this.checkDroppables();},true);},start:function(b){if(this.container){var d=this.element,j=this.container,e=j.getCoordinates(d.offsetParent),f={},a={};["top","right","bottom","left"].each(function(k){f[k]=j.getStyle("padding-"+k).toInt();a[k]=d.getStyle("margin-"+k).toInt();},this);var c=d.offsetWidth+a.left+a.right,i=d.offsetHeight+a.top+a.bottom;var h=[e.left+f.left,e.right-f.right-c];var g=[e.top+f.top,e.bottom-f.bottom-i];this.options.limit={x:h,y:g};}this.parent(b);},checkAgainst:function(b){b=b.getCoordinates();var a=this.mouse.now;return(a.x>b.left&&a.x<b.right&&a.y<b.bottom&&a.y>b.top);},checkDroppables:function(){var a=this.droppables.filter(this.checkAgainst,this).getLast();if(this.overed!=a){if(this.overed){this.fireEvent("leave",[this.element,this.overed]);}if(a){this.overed=a;this.fireEvent("enter",[this.element,a]);}else{this.overed=null;}}},drag:function(a){this.parent(a);if(this.droppables.length){this.checkDroppables();}},stop:function(a){this.checkDroppables();this.fireEvent("drop",[this.element,this.overed]);this.overed=null;return this.parent(a);}});Element.implement({makeDraggable:function(a){return new Drag.Move(this,a);}});
var btmenu={disappeardelay:200,disablemenuclick:false,enableiframeshim:1,dropmenuobj:null,ie:document.all,firefox:document.getElementById&&!document.all,previousmenuitem:null,currentpageurl:window.location.href.replace("http://"+window.location.hostname,"").replace(/^\//,""),getposOffset:function(d,c){var b=(c=="left")?d.offsetLeft:d.offsetTop;var a=d.offsetParent;while(a!=null){b=(c=="left")?b+a.offsetLeft:b+a.offsetTop;a=a.offsetParent;}return b;},showhide:function(c,b,a){if(this.ie||this.firefox){this.dropmenuobj.style.left=this.dropmenuobj.style.top="-500px";}if(b.type=="click"&&c.visibility==hidden||b.type=="mouseover"){if(a.parentNode.className.indexOf("default")==-1){a.parentNode.className="selected";}c.visibility="visible";}else{if(b.type=="click"){c.visibility="hidden";}}},iecompattest:function(){return(document.compatMode&&document.compatMode!="BackCompat")?document.documentElement:document.body;},clearbrowseredge:function(e,c){var b=0;if(c=="rightedge"){var d=this.ie&&!window.opera?this.standardbody.scrollLeft+this.standardbody.clientWidth-15:window.pageXOffset+window.innerWidth-15;this.dropmenuobj.contentmeasure=this.dropmenuobj.offsetWidth;if(d-this.dropmenuobj.x<this.dropmenuobj.contentmeasure){b=this.dropmenuobj.contentmeasure-e.offsetWidth;}}else{var a=this.ie&&!window.opera?this.standardbody.scrollTop:window.pageYOffset;var d=this.ie&&!window.opera?this.standardbody.scrollTop+this.standardbody.clientHeight-15:window.pageYOffset+window.innerHeight-18;this.dropmenuobj.contentmeasure=this.dropmenuobj.offsetHeight;if(d-this.dropmenuobj.y<this.dropmenuobj.contentmeasure){b=this.dropmenuobj.contentmeasure+e.offsetHeight;if((this.dropmenuobj.y-a)<this.dropmenuobj.contentmeasure){b=this.dropmenuobj.y+e.offsetHeight-a;}}this.dropmenuobj.firstlink.style.borderTopWidth=(b==0)?0:"1px";}return b;},dropit:function(d,c,a){if(this.dropmenuobj!=null){this.dropmenuobj.style.visibility="hidden";if(this.previousmenuitem!=null&&this.previousmenuitem!=d){if(this.previousmenuitem.parentNode.className.indexOf("default")==-1){this.previousmenuitem.parentNode.className="";}}}this.clearhidemenu();if(this.ie||this.firefox){d.onmouseout=function(){btmenu.delayhidemenu(d);};d.onclick=function(){return !btmenu.disablemenuclick;};this.dropmenuobj=document.getElementById(a);this.dropmenuobj.onmouseover=function(){btmenu.clearhidemenu();};this.dropmenuobj.onmouseout=function(f){btmenu.dynamichide(f,d);};this.dropmenuobj.onclick=function(){btmenu.delayhidemenu(d);};this.showhide(this.dropmenuobj.style,c,d);this.dropmenuobj.x=this.getposOffset(d,"left");this.dropmenuobj.y=this.getposOffset(d,"top");if(this.ie){this.dropmenuobj.x++;}this.dropmenuobj.style.left=this.dropmenuobj.x-this.clearbrowseredge(d,"rightedge")+"px";if(!this.ie){this.dropmenuobj.y-=2;}else{this.dropmenuobj.y++;}this.dropmenuobj.style.top=this.dropmenuobj.y-this.clearbrowseredge(d,"bottomedge")+d.offsetHeight+"px";this.previousmenuitem=d;this.positionshim();}if(this.dropmenuobj.offsetWidth<=d.offsetWidth||this.dropmenuobj.offsetWidth<80){var b=d.offsetWidth;if(80>b){b=80;}if(d.offsetWidth==b){b=b+20;}this.dropmenuobj.style.width=b+"px";}},contains_firefox:function(d,c){while(c.parentNode){if((c=c.parentNode)==d){return true;}}return false;},dynamichide:function(c,b){var a=window.event?window.event:c;if(this.ie&&!this.dropmenuobj.contains(a.toElement)){this.delayhidemenu(b);}else{if(this.firefox&&c.currentTarget!=a.relatedTarget&&!this.contains_firefox(a.currentTarget,a.relatedTarget)){this.delayhidemenu(b);}}},delayhidemenu:function(a){this.delayhide=setTimeout(function(){btmenu.dropmenuobj.style.visibility="hidden";if(a.parentNode.className.indexOf("default")==-1){a.parentNode.className="";}},this.disappeardelay);},clearhidemenu:function(){if(this.delayhide!="undefined"){clearTimeout(this.delayhide);}},positionshim:function(){if(this.enableiframeshim&&typeof this.shimobject!="undefined"){if(this.dropmenuobj.style.visibility=="visible"){this.shimobject.style.width=this.dropmenuobj.offsetWidth+"px";this.shimobject.style.height=this.dropmenuobj.offsetHeight+"px";this.shimobject.style.left=this.dropmenuobj.style.left;this.shimobject.style.top=this.dropmenuobj.style.top;}this.shimobject.style.display=(this.dropmenuobj.style.visibility=="visible")?"block":"none";}},hideshim:function(){if(this.enableiframeshim&&typeof this.shimobject!="undefined"){this.shimobject.style.display="none";}},isSelected:function(a){var a=a.replace("http://"+a.hostname,"").replace(/^\//,"");return(btmenu.currentpageurl==a);},init:function(e,c){this.standardbody=(document.compatMode=="CSS1Compat")?document.documentElement:document.body;var f=document.getElementById(e).getElementsByTagName("a");for(var d=0;d<f.length;d++){if(f[d].getAttribute("rel")){var a=f[d].getAttribute("rel");document.getElementById(a).firstlink=document.getElementById(a).getElementsByTagName("a")[0];f[d].onmouseover=function(h){var g=typeof h!="undefined"?h:window.event;btmenu.dropit(this,g,this.getAttribute("rel"));};}if(c=="auto"&&typeof b=="undefined"&&this.isSelected(f[d].href)){f[d].parentNode.className+=" selected default";var b=true;}else{if(parseInt(c)==d){f[d].parentNode.className+=" selected default";}}}}};
var window_hide_element=[];var window_open_num=0;var Window=new Class({Implements:[Options],options:{scroll:true,mask:true,drag:true,width:400,height:300,document:document},initialize:function(b,a){this.id=b;this.win_size=window.getSize();this.win_scroll=window.getScroll();this.setOptions(a);},box:function(){this.hideElement();(this.options.mask==true)&&this.createMask();$(this.id).setStyle("display","block");this.options.width=0<this.options.width?this.options.width:$(this.id).getSize().x;this.options.height=0<this.options.height?this.options.height:$(this.id).getSize().y;var b=(this.win_size.x-this.options.width)/2+this.win_scroll.x;var a=(this.win_size.y-this.options.height)/2+this.win_scroll.y;$(this.id).setStyles({position:"absolute","z-index":999,top:a.toInt(),left:b.toInt(),width:this.options.width,height:this.options.height});window_open_num++;(this.options.drag==true)&&this.dragDiv();(this.options.scroll==true)&&window.addEvent("scroll",(function(c){new Window(c).move();}).pass([this.id]));return this;},alert:function(b){b=b||"stop";this.hideElement();(this.options.mask==true)&&this.createMask();if(!$("window_alert")){var a=new Element("div",{id:"window_alert"});a.addClass("box");a.addClass("window_alert");a.inject(document.body,"top");a=null;window_open_num++;}var e='<div class="inner">'+this.id+"</div>";e+='<div class="window_alert_button"><input type="button" id="window_alert_button" class="formButton" value="确 定" /></div>';$("window_alert").set("html",e);$("window_alert").setStyles({width:this.options.width,display:"block"});$("window_alert").getElements(".inner").setStyles({"background-image":'url("../images/window_alert_'+b+'.gif")',"background-repeat":"no-repeat"});$("window_alert_button").addEvent("click",(function(f){new Window("window_alert",{mask:f}).close();}).pass([this.options.mask]));var d=(this.win_size.x-this.options.width)/2+this.win_scroll.x;var c=(this.win_size.y-$("window_alert").getSize().y)/2+this.win_scroll.y;$("window_alert").setStyles({top:c.toInt(),left:d.toInt()});$("window_alert_button").focus();(this.options.drag==true)&&this.dragDiv("window_alert");(this.options.scroll==true)&&window.addEvent("scroll",(function(f){new Window(f).move();}).pass(["window_alert"]));return this;},move:function(){var b=(this.win_size.x-$(this.id).getSize().x)/2+this.win_scroll.x;var a=(this.win_size.y-$(this.id).getSize().y)/2+this.win_scroll.y;$(this.id).setStyles({top:a.toInt(),left:b.toInt()});return this;},close:function(a){a=a||this.id;$(a).setStyles({display:"none",top:0,left:0});(a=="window_alert")&&($(a).dispose());window_open_num--;(window_open_num==0)&&(this.hideElement(1));if($("window_black_mask")&&this.options.mask){$("window_black_mask").setStyle("display","none");}window.removeEvents("scroll");return this;},hideElement:function(b){if(1==b){for(var a=0;a<window_hide_element.length;a++){window_hide_element[a].o.style.visibility=window_hide_element[a].v;}window_hide_element=[];return this;}var c=$$("embed","object","select");for(var a=0;a<c.length;a++){if("hidden"!=c[a].style.visibility){window_hide_element.push({o:c[a],v:c[a].style.visibility});c[a].style.visibility="hidden";}}return this;},dragDiv:function(d){var c=d||this.id+"_title";var a=d||this.id;$(c).setStyle("cursor","move");var b=null;if(c==a){b=new Drag.Move(a,{container:$("btm")});$(a).addEvents({mousedown:function(f){$(a).setOpacity(0.6);},mouseup:function(f){$(a).setOpacity(1);}});}else{$(c).addEvents({mousedown:function(f){$(a).setOpacity(0.6);b=new Drag.Move(a,{container:$("btm"),onComplete:function(){this.detach();}});},mouseup:function(f){b.detach();$(a).setOpacity(1);}});}return this;},createMask:function(){if(!$("window_black_mask")){var a=new Element("div",{id:"window_black_mask"});a.addClass("window_black_mask");a.inject(document.body,"top");}$("window_black_mask").setStyles({display:"block",width:"100%",height:window.getScrollSize().y});$("window_black_mask").setOpacity(0.5);}});Window.box=function(b,a){return new Window(b,a).box();};Window.alert=function(d,b,a){return new Window(d,a).alert(b);};Window.close=function(b,a){return new Window(b,a).close();};